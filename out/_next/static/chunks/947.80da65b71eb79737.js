"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[947],{9947:function(e,t,s){s.d(t,{Transaction:function(){return ei}});var a=s(4779),r=s(9859),i=s(7435);let n=BigInt(0),l=BigInt(36);function o(e){let t=(e=e.toLowerCase()).substring(2).split(""),s=new Uint8Array(40);for(let e=0;e<40;e++)s[e]=t[e].charCodeAt(0);let i=(0,r.Pw)((0,a.w)(s));for(let e=0;e<40;e+=2)i[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&i[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return"0x"+t.join("")}let h={};for(let e=0;e<10;e++)h[String(e)]=String(e);for(let e=0;e<26;e++)h[String.fromCharCode(65+e)]=String(10+e);let u=function(){let e={};for(let t=0;t<36;t++)e["0123456789abcdefghijklmnopqrstuvwxyz"[t]]=BigInt(t);return e}();function c(e){if((0,i.en)("string"==typeof e,"invalid address","address",e),e.match(/^(0x)?[0-9a-fA-F]{40}$/)){e.startsWith("0x")||(e="0x"+e);let t=o(e);return(0,i.en)(!e.match(/([A-F].*[a-f])|([a-f].*[A-F])/)||t===e,"bad address checksum","address",e),t}if(e.match(/^XE[0-9]{2}[0-9A-Za-z]{30,31}$/)){(0,i.en)(e.substring(2,4)===function(e){let t=(e=(e=e.toUpperCase()).substring(4)+e.substring(0,2)+"00").split("").map(e=>h[e]).join("");for(;t.length>=15;){let e=t.substring(0,15);t=parseInt(e,10)%97+t.substring(e.length)}let s=String(98-parseInt(t,10)%97);for(;s.length<2;)s="0"+s;return s}(e),"bad icap checksum","address",e);let t=(function(e){e=e.toLowerCase();let t=n;for(let s=0;s<e.length;s++)t=t*l+u[e[s]];return t})(e.substring(4)).toString(16);for(;t.length<40;)t="0"+t;return o("0x"+t)}(0,i.en)(!1,"invalid address","address",e)}let f="0x0000000000000000000000000000000000000000";var d=s(7744),g=s(167),b=s(3538),m=s(4153);let[P,y]=b.ZP.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),x=new Uint32Array(80),p=new Uint32Array(80);class v extends g.N{constructor(){super(128,64,16,!1),this.Ah=1779033703,this.Al=-205731576,this.Bh=-1150833019,this.Bl=-2067093701,this.Ch=1013904242,this.Cl=-23791573,this.Dh=-1521486534,this.Dl=1595750129,this.Eh=1359893119,this.El=-1377402159,this.Fh=-1694144372,this.Fl=725511199,this.Gh=528734635,this.Gl=-79577749,this.Hh=1541459225,this.Hl=327033209}get(){let{Ah:e,Al:t,Bh:s,Bl:a,Ch:r,Cl:i,Dh:n,Dl:l,Eh:o,El:h,Fh:u,Fl:c,Gh:f,Gl:d,Hh:g,Hl:b}=this;return[e,t,s,a,r,i,n,l,o,h,u,c,f,d,g,b]}set(e,t,s,a,r,i,n,l,o,h,u,c,f,d,g,b){this.Ah=0|e,this.Al=0|t,this.Bh=0|s,this.Bl=0|a,this.Ch=0|r,this.Cl=0|i,this.Dh=0|n,this.Dl=0|l,this.Eh=0|o,this.El=0|h,this.Fh=0|u,this.Fl=0|c,this.Gh=0|f,this.Gl=0|d,this.Hh=0|g,this.Hl=0|b}process(e,t){for(let s=0;s<16;s++,t+=4)x[s]=e.getUint32(t),p[s]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|x[e-15],s=0|p[e-15],a=b.ZP.rotrSH(t,s,1)^b.ZP.rotrSH(t,s,8)^b.ZP.shrSH(t,s,7),r=b.ZP.rotrSL(t,s,1)^b.ZP.rotrSL(t,s,8)^b.ZP.shrSL(t,s,7),i=0|x[e-2],n=0|p[e-2],l=b.ZP.rotrSH(i,n,19)^b.ZP.rotrBH(i,n,61)^b.ZP.shrSH(i,n,6),o=b.ZP.rotrSL(i,n,19)^b.ZP.rotrBL(i,n,61)^b.ZP.shrSL(i,n,6),h=b.ZP.add4L(r,o,p[e-7],p[e-16]),u=b.ZP.add4H(h,a,l,x[e-7],x[e-16]);x[e]=0|u,p[e]=0|h}let{Ah:s,Al:a,Bh:r,Bl:i,Ch:n,Cl:l,Dh:o,Dl:h,Eh:u,El:c,Fh:f,Fl:d,Gh:g,Gl:m,Hh:v,Hl:F}=this;for(let e=0;e<80;e++){let t=b.ZP.rotrSH(u,c,14)^b.ZP.rotrSH(u,c,18)^b.ZP.rotrBH(u,c,41),L=b.ZP.rotrSL(u,c,14)^b.ZP.rotrSL(u,c,18)^b.ZP.rotrBL(u,c,41),G=u&f^~u&g,A=c&d^~c&m,I=b.ZP.add5L(F,L,A,y[e],p[e]),w=b.ZP.add5H(I,v,t,G,P[e],x[e]),B=0|I,H=b.ZP.rotrSH(s,a,28)^b.ZP.rotrBH(s,a,34)^b.ZP.rotrBH(s,a,39),Z=b.ZP.rotrSL(s,a,28)^b.ZP.rotrBL(s,a,34)^b.ZP.rotrBL(s,a,39),S=s&r^s&n^r&n,k=a&i^a&l^i&l;v=0|g,F=0|m,g=0|f,m=0|d,f=0|u,d=0|c,({h:u,l:c}=b.ZP.add(0|o,0|h,0|w,0|B)),o=0|n,h=0|l,n=0|r,l=0|i,r=0|s,i=0|a;let D=b.ZP.add3L(B,Z,k);s=b.ZP.add3H(D,w,H,S),a=0|D}({h:s,l:a}=b.ZP.add(0|this.Ah,0|this.Al,0|s,0|a)),({h:r,l:i}=b.ZP.add(0|this.Bh,0|this.Bl,0|r,0|i)),({h:n,l:l}=b.ZP.add(0|this.Ch,0|this.Cl,0|n,0|l)),({h:o,l:h}=b.ZP.add(0|this.Dh,0|this.Dl,0|o,0|h)),({h:u,l:c}=b.ZP.add(0|this.Eh,0|this.El,0|u,0|c)),({h:f,l:d}=b.ZP.add(0|this.Fh,0|this.Fl,0|f,0|d)),({h:g,l:m}=b.ZP.add(0|this.Gh,0|this.Gl,0|g,0|m)),({h:v,l:F}=b.ZP.add(0|this.Hh,0|this.Hl,0|v,0|F)),this.set(s,a,r,i,n,l,o,h,u,c,f,d,g,m,v,F)}roundClean(){x.fill(0),p.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}let F=(0,m.hE)(()=>new v),L=function(){if("undefined"!=typeof self)return self;if("undefined"!=typeof window)return window;if("undefined"!=typeof global)return global;throw Error("unable to locate global object")}();function G(e){switch(e){case"sha256":return d.J.create();case"sha512":return F.create()}(0,i.en)(!1,"invalid hashing algorithm name","algorithm",e)}L.crypto||L.msCrypto;let A=function(e){return G("sha256").update(e).digest()},I=function(e){return G("sha512").update(e).digest()},w=A,B=I,H=!1,Z=!1;function S(e){let t=(0,r.Pw)(e,"data");return(0,r.Dv)(w(t))}function k(e){let t=(0,r.Pw)(e,"data");return(0,r.Dv)(B(t))}S._=A,S.lock=function(){H=!0},S.register=function(e){if(H)throw Error("sha256 is locked");w=e},Object.freeze(S),k._=I,k.lock=function(){Z=!0},k.register=function(e){if(Z)throw Error("sha512 is locked");B=e},Object.freeze(S);var D=s(5102),z=s(5548),E=s(7452);function C(e,t,s){let a=0;for(let r=0;r<s;r++)a=256*a+e[t+r];return a}function T(e,t,s,a){let r=[];for(;s<t+1+a;){let n=U(e,s);r.push(n.result),s+=n.consumed,(0,i.hu)(s<=t+1+a,"child data too short","BUFFER_OVERRUN",{buffer:e,length:a,offset:t})}return{consumed:1+a,result:r}}function U(e,t){(0,i.hu)(0!==e.length,"data too short","BUFFER_OVERRUN",{buffer:e,length:0,offset:1});let s=t=>{(0,i.hu)(t<=e.length,"data short segment too short","BUFFER_OVERRUN",{buffer:e,length:e.length,offset:t})};if(e[t]>=248){let a=e[t]-247;s(t+1+a);let r=C(e,t+1,a);return s(t+1+a+r),T(e,t,t+1+a,a+r)}if(e[t]>=192){let a=e[t]-192;return s(t+1+a),T(e,t,t+1,a)}if(e[t]>=184){let a=e[t]-183;s(t+1+a);let i=C(e,t+1,a);s(t+1+a+i);let n=(0,r.Dv)(e.slice(t+1+a,t+1+a+i));return{consumed:1+a+i,result:n}}if(e[t]>=128){let a=e[t]-128;s(t+1+a);let i=(0,r.Dv)(e.slice(t+1,t+1+a));return{consumed:1+a,result:i}}return{consumed:1,result:function(e){let t=e.toString(16);for(;t.length<2;)t="0"+t;return"0x"+t}(e[t])}}function V(e){let t=(0,r.Pw)(e,"data"),s=U(t,0);return(0,i.en)(s.consumed===t.length,"unexpected junk after rlp payload","data",e),s.result}function O(e){let t=[];for(;e;)t.unshift(255&e),e>>=8;return t}let N="0123456789abcdef";function R(e){let t="0x";for(let s of function e(t){if(Array.isArray(t)){let s=[];if(t.forEach(function(t){s=s.concat(e(t))}),s.length<=55)return s.unshift(192+s.length),s;let a=O(s.length);return a.unshift(247+a.length),a.concat(s)}let s=Array.prototype.slice.call((0,r.Pw)(t,"object"));if(1===s.length&&s[0]<=127)return s;if(s.length<=55)return s.unshift(128+s.length),s;let a=O(s.length);return a.unshift(183+a.length),a.concat(s)}(e))t+=N[s>>4]+N[15&s];return t}function _(e,t){return{address:c(e),storageKeys:t.map((e,t)=>((0,i.en)((0,r.A7)(e,32),"invalid slot",`storageKeys[${t}]`,e),e.toLowerCase()))}}function j(e){if(Array.isArray(e))return e.map((t,s)=>Array.isArray(t)?((0,i.en)(2===t.length,"invalid slot set",`value[${s}]`,t),_(t[0],t[1])):((0,i.en)(null!=t&&"object"==typeof t,"invalid address-slot set","value",e),_(t.address,t.storageKeys)));(0,i.en)(null!=e&&"object"==typeof e,"invalid access list","value",e);let t=Object.keys(e).map(t=>{let s=e[t].reduce((e,t)=>(e[t]=!0,e),{});return _(t,Object.keys(s).sort())});return t.sort((e,t)=>e.address.localeCompare(t.address)),t}let $=BigInt(0),K=BigInt(2),q=BigInt(27),J=BigInt(28),W=BigInt(35),X=BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff");function M(e,t){let s=e.toString(16);for(;s.length<2;)s="0"+s;return"0x"+(s+=S(t).substring(4))}function Q(e){return"0x"===e?null:c(e)}function Y(e,t){try{return j(e)}catch(s){(0,i.en)(!1,s.message,t,e)}}function ee(e,t){return"0x"===e?0:(0,E.Dx)(e,t)}function et(e,t){if("0x"===e)return $;let s=(0,E.yT)(e,t);return(0,i.en)(s<=X,"value exceeds uint size",t,s),s}function es(e,t){let s=(0,E.yT)(e,"value"),a=(0,E.ot)(s);return(0,i.en)(a.length<=32,"value too large",`tx.${t}`,s),a}function ea(e){return j(e).map(e=>[e.address,e.storageKeys])}function er(e,t){let s;try{if(s=ee(t[0],"yParity"),0!==s&&1!==s)throw Error("bad yParity")}catch(e){(0,i.en)(!1,"invalid yParity","yParity",t[0])}let a=(0,r.U3)(t[1],32),n=(0,r.U3)(t[2],32),l=D.P.from({r:a,s:n,yParity:s});e.signature=l}class ei{#e;#t;#s;#a;#r;#i;#n;#l;#o;#h;#u;#c;#f;#d;#g;#b;get type(){return this.#e}set type(e){switch(e){case null:this.#e=null;break;case 0:case"legacy":this.#e=0;break;case 1:case"berlin":case"eip-2930":this.#e=1;break;case 2:case"london":case"eip-1559":this.#e=2;break;case 3:case"cancun":case"eip-4844":this.#e=3;break;default:(0,i.en)(!1,"unsupported transaction type","type",e)}}get typeName(){switch(this.type){case 0:return"legacy";case 1:return"eip-2930";case 2:return"eip-1559";case 3:return"eip-4844"}return null}get to(){let e=this.#t;return null==e&&3===this.type?f:e}set to(e){this.#t=null==e?null:c(e)}get nonce(){return this.#a}set nonce(e){this.#a=(0,E.Dx)(e,"value")}get gasLimit(){return this.#r}set gasLimit(e){this.#r=(0,E.yT)(e)}get gasPrice(){let e=this.#i;return null==e&&(0===this.type||1===this.type)?$:e}set gasPrice(e){this.#i=null==e?null:(0,E.yT)(e,"gasPrice")}get maxPriorityFeePerGas(){let e=this.#n;return null==e?2===this.type||3===this.type?$:null:e}set maxPriorityFeePerGas(e){this.#n=null==e?null:(0,E.yT)(e,"maxPriorityFeePerGas")}get maxFeePerGas(){let e=this.#l;return null==e?2===this.type||3===this.type?$:null:e}set maxFeePerGas(e){this.#l=null==e?null:(0,E.yT)(e,"maxFeePerGas")}get data(){return this.#s}set data(e){this.#s=(0,r.Dv)(e)}get value(){return this.#o}set value(e){this.#o=(0,E.yT)(e,"value")}get chainId(){return this.#h}set chainId(e){this.#h=(0,E.yT)(e)}get signature(){return this.#u||null}set signature(e){this.#u=null==e?null:D.P.from(e)}get accessList(){let e=this.#c||null;return null==e?1===this.type||2===this.type||3===this.type?[]:null:e}set accessList(e){this.#c=null==e?null:j(e)}get maxFeePerBlobGas(){let e=this.#f;return null==e&&3===this.type?$:e}set maxFeePerBlobGas(e){this.#f=null==e?null:(0,E.yT)(e,"maxFeePerBlobGas")}get blobVersionedHashes(){let e=this.#d;return null==e&&3===this.type?[]:e}set blobVersionedHashes(e){if(null!=e){(0,i.en)(Array.isArray(e),"blobVersionedHashes must be an Array","value",e),e=e.slice();for(let t=0;t<e.length;t++)(0,i.en)((0,r.A7)(e[t],32),"invalid blobVersionedHash",`value[${t}]`,e[t])}this.#d=e}get blobs(){return null==this.#b?null:this.#b.map(e=>Object.assign({},e))}set blobs(e){if(null==e){this.#b=null;return}let t=[],s=[];for(let a=0;a<e.length;a++){let n=e[a];if((0,r.Zq)(n)){(0,i.hu)(this.#g,"adding a raw blob requires a KZG library","UNSUPPORTED_OPERATION",{operation:"set blobs()"});let e=(0,r.Pw)(n);if((0,i.en)(e.length<=131072,"blob is too large",`blobs[${a}]`,n),131072!==e.length){let t=new Uint8Array(131072);t.set(e),e=t}let l=this.#g.blobToKzgCommitment(e),o=(0,r.Dv)(this.#g.computeBlobKzgProof(e,l));t.push({data:(0,r.Dv)(e),commitment:(0,r.Dv)(l),proof:o}),s.push(M(1,l))}else{let e=(0,r.Dv)(n.commitment);t.push({data:(0,r.Dv)(n.data),commitment:e,proof:(0,r.Dv)(n.proof)}),s.push(M(1,e))}}this.#b=t,this.#d=s}get kzg(){return this.#g}set kzg(e){this.#g=e}constructor(){this.#e=null,this.#t=null,this.#a=0,this.#r=$,this.#i=null,this.#n=null,this.#l=null,this.#s="0x",this.#o=$,this.#h=$,this.#u=null,this.#c=null,this.#f=null,this.#d=null,this.#b=null,this.#g=null}get hash(){return null==this.signature?null:(0,a.w)(this.#m(!0,!1))}get unsignedHash(){return(0,a.w)(this.unsignedSerialized)}get from(){var e,t,s;let r;return null==this.signature?null:(e=this.unsignedHash,t=this.signature,r="string"==typeof(s=z.E.recoverPublicKey(e,t))?z.E.computePublicKey(s,!1):s.publicKey,c((0,a.w)("0x"+r.substring(4)).substring(26)))}get fromPublicKey(){return null==this.signature?null:z.E.recoverPublicKey(this.unsignedHash,this.signature)}isSigned(){return null!=this.signature}#m(e,t){(0,i.hu)(!e||null!=this.signature,"cannot serialize unsigned transaction; maybe you meant .unsignedSerialized","UNSUPPORTED_OPERATION",{operation:".serialized"});let s=e?this.signature:null;switch(this.inferType()){case 0:return function(e,t){let s=[es(e.nonce,"nonce"),es(e.gasPrice||0,"gasPrice"),es(e.gasLimit,"gasLimit"),e.to||"0x",es(e.value,"value"),e.data],a=$;if(e.chainId!=$)a=(0,E.yT)(e.chainId,"tx.chainId"),(0,i.en)(!t||null==t.networkV||t.legacyChainId===a,"tx.chainId/sig.v mismatch","sig",t);else if(e.signature){let t=e.signature.legacyChainId;null!=t&&(a=t)}if(!t)return a!==$&&(s.push((0,E.ot)(a)),s.push("0x"),s.push("0x")),R(s);let r=BigInt(27+t.yParity);return a!==$?r=D.P.getChainIdV(a,t.v):BigInt(t.v)!==r&&(0,i.en)(!1,"tx.chainId/sig.v mismatch","sig",t),s.push((0,E.ot)(r)),s.push((0,E.ot)(t.r)),s.push((0,E.ot)(t.s)),R(s)}(this,s);case 1:return function(e,t){let s=[es(e.chainId,"chainId"),es(e.nonce,"nonce"),es(e.gasPrice||0,"gasPrice"),es(e.gasLimit,"gasLimit"),e.to||"0x",es(e.value,"value"),e.data,ea(e.accessList||[])];return t&&(s.push(es(t.yParity,"recoveryParam")),s.push((0,E.ot)(t.r)),s.push((0,E.ot)(t.s))),(0,r.zo)(["0x01",R(s)])}(this,s);case 2:return function(e,t){let s=[es(e.chainId,"chainId"),es(e.nonce,"nonce"),es(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),es(e.maxFeePerGas||0,"maxFeePerGas"),es(e.gasLimit,"gasLimit"),e.to||"0x",es(e.value,"value"),e.data,ea(e.accessList||[])];return t&&(s.push(es(t.yParity,"yParity")),s.push((0,E.ot)(t.r)),s.push((0,E.ot)(t.s))),(0,r.zo)(["0x02",R(s)])}(this,s);case 3:return function(e,t,s){let a=[es(e.chainId,"chainId"),es(e.nonce,"nonce"),es(e.maxPriorityFeePerGas||0,"maxPriorityFeePerGas"),es(e.maxFeePerGas||0,"maxFeePerGas"),es(e.gasLimit,"gasLimit"),e.to||f,es(e.value,"value"),e.data,ea(e.accessList||[]),es(e.maxFeePerBlobGas||0,"maxFeePerBlobGas"),function(e,t){(0,i.en)(Array.isArray(e),`invalid ${t}`,"value",e);for(let t=0;t<e.length;t++)(0,i.en)((0,r.A7)(e[t],32),"invalid ${ param } hash",`value[${t}]`,e[t]);return e}(e.blobVersionedHashes||[],"blobVersionedHashes")];return t&&(a.push(es(t.yParity,"yParity")),a.push((0,E.ot)(t.r)),a.push((0,E.ot)(t.s)),s)?(0,r.zo)(["0x03",R([a,s.map(e=>e.data),s.map(e=>e.commitment),s.map(e=>e.proof)])]):(0,r.zo)(["0x03",R(a)])}(this,s,t?this.blobs:null)}(0,i.hu)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:".serialized"})}get serialized(){return this.#m(!0,!0)}get unsignedSerialized(){return this.#m(!1,!1)}inferType(){let e=this.inferTypes();return e.indexOf(2)>=0?2:e.pop()}inferTypes(){let e=null!=this.gasPrice,t=null!=this.maxFeePerGas||null!=this.maxPriorityFeePerGas,s=null!=this.accessList,a=null!=this.#f||this.#d;null!=this.maxFeePerGas&&null!=this.maxPriorityFeePerGas&&(0,i.hu)(this.maxFeePerGas>=this.maxPriorityFeePerGas,"priorityFee cannot be more than maxFee","BAD_DATA",{value:this}),(0,i.hu)(!t||0!==this.type&&1!==this.type,"transaction type cannot have maxFeePerGas or maxPriorityFeePerGas","BAD_DATA",{value:this}),(0,i.hu)(0!==this.type||!s,"legacy transaction cannot have accessList","BAD_DATA",{value:this});let r=[];return null!=this.type?r.push(this.type):t?r.push(2):e?(r.push(1),s||r.push(0)):s?(r.push(1),r.push(2)):(a&&this.to||(r.push(0),r.push(1),r.push(2)),r.push(3)),r.sort(),r}isLegacy(){return 0===this.type}isBerlin(){return 1===this.type}isLondon(){return 2===this.type}isCancun(){return 3===this.type}clone(){return ei.from(this)}toJSON(){let e=e=>null==e?null:e.toString();return{type:this.type,to:this.to,data:this.data,nonce:this.nonce,gasLimit:e(this.gasLimit),gasPrice:e(this.gasPrice),maxPriorityFeePerGas:e(this.maxPriorityFeePerGas),maxFeePerGas:e(this.maxFeePerGas),value:e(this.value),chainId:e(this.chainId),sig:this.signature?this.signature.toJSON():null,accessList:this.accessList}}static from(e){if(null==e)return new ei;if("string"==typeof e){let t=(0,r.Pw)(e);if(t[0]>=127)return ei.from(function(e){let t=V(e);(0,i.en)(Array.isArray(t)&&(9===t.length||6===t.length),"invalid field count for legacy transaction","data",e);let s={type:0,nonce:ee(t[0],"nonce"),gasPrice:et(t[1],"gasPrice"),gasLimit:et(t[2],"gasLimit"),to:Q(t[3]),value:et(t[4],"value"),data:(0,r.Dv)(t[5]),chainId:$};if(6===t.length)return s;let a=et(t[6],"v"),n=et(t[7],"r"),l=et(t[8],"s");if(n===$&&l===$)s.chainId=a;else{let e=(a-W)/K;e<$&&(e=$),s.chainId=e,(0,i.en)(e!==$||a===q||a===J,"non-canonical legacy v","v",t[6]),s.signature=D.P.from({r:(0,r.U3)(t[7],32),s:(0,r.U3)(t[8],32),v:a})}return s}(t));switch(t[0]){case 1:return ei.from(function(e){let t=V((0,r.Pw)(e).slice(1));(0,i.en)(Array.isArray(t)&&(8===t.length||11===t.length),"invalid field count for transaction type: 1","data",(0,r.Dv)(e));let s={type:1,chainId:et(t[0],"chainId"),nonce:ee(t[1],"nonce"),gasPrice:et(t[2],"gasPrice"),gasLimit:et(t[3],"gasLimit"),to:Q(t[4]),value:et(t[5],"value"),data:(0,r.Dv)(t[6]),accessList:Y(t[7],"accessList")};return 8===t.length||er(s,t.slice(8)),s}(t));case 2:return ei.from(function(e){let t=V((0,r.Pw)(e).slice(1));(0,i.en)(Array.isArray(t)&&(9===t.length||12===t.length),"invalid field count for transaction type: 2","data",(0,r.Dv)(e));let s={type:2,chainId:et(t[0],"chainId"),nonce:ee(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Q(t[5]),value:et(t[6],"value"),data:(0,r.Dv)(t[7]),accessList:Y(t[8],"accessList")};return 9===t.length||er(s,t.slice(9)),s}(t));case 3:return ei.from(function(e){let t=V((0,r.Pw)(e).slice(1)),s="3",a=null;if(4===t.length&&Array.isArray(t[0])){s="3 (network format)";let e=t[1],r=t[2],n=t[3];(0,i.en)(Array.isArray(e),"invalid network format: blobs not an array","fields[1]",e),(0,i.en)(Array.isArray(r),"invalid network format: commitments not an array","fields[2]",r),(0,i.en)(Array.isArray(n),"invalid network format: proofs not an array","fields[3]",n),(0,i.en)(e.length===r.length,"invalid network format: blobs/commitments length mismatch","fields",t),(0,i.en)(e.length===n.length,"invalid network format: blobs/proofs length mismatch","fields",t),a=[];for(let s=0;s<t[1].length;s++)a.push({data:e[s],commitment:r[s],proof:n[s]});t=t[0]}(0,i.en)(Array.isArray(t)&&(11===t.length||14===t.length),`invalid field count for transaction type: ${s}`,"data",(0,r.Dv)(e));let n={type:3,chainId:et(t[0],"chainId"),nonce:ee(t[1],"nonce"),maxPriorityFeePerGas:et(t[2],"maxPriorityFeePerGas"),maxFeePerGas:et(t[3],"maxFeePerGas"),gasPrice:null,gasLimit:et(t[4],"gasLimit"),to:Q(t[5]),value:et(t[6],"value"),data:(0,r.Dv)(t[7]),accessList:Y(t[8],"accessList"),maxFeePerBlobGas:et(t[9],"maxFeePerBlobGas"),blobVersionedHashes:t[10]};a&&(n.blobs=a),(0,i.en)(null!=n.to,`invalid address for transaction type: ${s}`,"data",e),(0,i.en)(Array.isArray(n.blobVersionedHashes),"invalid blobVersionedHashes: must be an array","data",e);for(let t=0;t<n.blobVersionedHashes.length;t++)(0,i.en)((0,r.A7)(n.blobVersionedHashes[t],32),`invalid blobVersionedHash at index ${t}: must be length 32`,"data",e);return 11===t.length||er(n,t.slice(11)),n}(t))}(0,i.hu)(!1,"unsupported transaction type","UNSUPPORTED_OPERATION",{operation:"from"})}let t=new ei;return null!=e.type&&(t.type=e.type),null!=e.to&&(t.to=e.to),null!=e.nonce&&(t.nonce=e.nonce),null!=e.gasLimit&&(t.gasLimit=e.gasLimit),null!=e.gasPrice&&(t.gasPrice=e.gasPrice),null!=e.maxPriorityFeePerGas&&(t.maxPriorityFeePerGas=e.maxPriorityFeePerGas),null!=e.maxFeePerGas&&(t.maxFeePerGas=e.maxFeePerGas),null!=e.maxFeePerBlobGas&&(t.maxFeePerBlobGas=e.maxFeePerBlobGas),null!=e.data&&(t.data=e.data),null!=e.value&&(t.value=e.value),null!=e.chainId&&(t.chainId=e.chainId),null!=e.signature&&(t.signature=D.P.from(e.signature)),null!=e.accessList&&(t.accessList=e.accessList),null!=e.blobVersionedHashes&&(t.blobVersionedHashes=e.blobVersionedHashes),null!=e.kzg&&(t.kzg=e.kzg),null!=e.blobs&&(t.blobs=e.blobs),null!=e.hash&&((0,i.en)(t.isSigned(),"unsigned transaction cannot define '.hash'","tx",e),(0,i.en)(t.hash===e.hash,"hash mismatch","tx",e)),null!=e.from&&((0,i.en)(t.isSigned(),"unsigned transaction cannot define '.from'","tx",e),(0,i.en)(t.from.toLowerCase()===(e.from||"").toLowerCase(),"from mismatch","tx",e)),t}}}}]);